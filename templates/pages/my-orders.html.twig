{% extends 'base.html.twig' %}

{% set lightBody = true %}
{% set headerLight = true %}

{% block body %}
    <div class="page-header container">
        <h1 class="h1">Mes commandes</h1>
    </div>
    <div class="orders-page py3">
        <div class="orders-page__sidebar stack">
            <a href="{{ path('order.new') }}" class="btn-primary">Nouvelle commande</a>
            {#<ul class="orders-status">
                <li>
                    <a href="#">Afficher tout</a>
                </li>
                {% for state in states %}
                <li>
                    <a href="#"><span style="background-color: #{{ state.color }}"></span>{{ state.name }}</a>
                </li>
                {% endfor %}
            </ul>#}
        </div>
        <main class="orders-page__main stack">
            {% for order in orders %}
            <article class="order">
                <div class="order-col">
                    <div class="order-col__title">
                        <span>ID</span>
                    </div>
                    <div class="order-col__value">
                        <h5>{{ order.initialZeroId }}</h5>
                    </div>
                </div>
                <div class="order-col">
                    <div class="order-col__title">
                        <span>Nom du projet</span>
                    </div>
                    <div class="order-col__value">
                        <h5>{{ order.title }}</h5>
                    </div>
                </div>

                <div class="order-col">
                    <div class="order-col__title">
                        <span>Date de création</span>
                    </div>
                    <div class="order-col__value">
                        <h5>{{ order.createdAt | format_datetime('long', 'none') }}</h5>
                    </div>
                </div>

                <div class="order-col">
                    <div class="order-col__title">
                        <span>Bon de commande</span>
                    </div>
                    <div class="order-col__value">
                        <a href="{{ path('pdf.order.client', {'id': order.id}) }}" class="order-dl-btn" target="_blank">{{ feather('clipboard') }} Télécharger</a>
                    </div>
                </div>

                <div class="order-col">
                    <div class="order-col__title">
                        <span>Statut</span>
                    </div>
                    <div class="order-col__value">
                        <span class="pill small-round" style="color: #{{ order.currentStatus.state.color }}">{{ order.currentStatus }}</span>
                    </div>
                </div>

                <div class="order-col">
                    <a href="{{ path('orders.user.show', {id: order.id}) }}" class="order-btn">{{ feather('chevron-right') }}</a>
                </div>
            </article>
            {% endfor %}
        </main>
    </div>


{% endblock %}

